# 服务限流 #
### 简介 ###
- 服务降级的一种<br/>
```限流就是限制系统输入输出流量达到保护系统的目的。```系统的吞吐量通过测算之后，为保证系统稳定运行，当某服务达到一定阀值，就需要限制流量采取一些措施以达到限制流量的目的。例如```延迟处理／拒绝处理／部分拒绝```等。<br/>
「服务限流」其实是指当系统资源不够，不足以应对大量请求，即系统资源与访问量出现矛盾的时候，我们为了保证有限的资源能够正常服务，因此对系统按照预设的规则进行流量限制或功能限制的一种方法。

### 为什么做服务限流设计 ###
- 容量<br/>
假设系统设计只允许300万的用户正常使用，当服务器某天用户达到500万，由于这500万用户的随机性，在不做限流的情况下很有可能一次压垮整个应用。

### 怎么做服务限流设计 ###
- 熔断<br/>
当系统出现问题时，如果短时间内无法修复，系统要```自动```判断，开启熔断器，拒绝流量访问，降低服务器压力，避免对后台的请求过高不释放导致服务器宕机。<br/>
```系统也应该能够动态监测后端程序的修复情况，当程序已恢复稳定时，可以关闭熔断开关，恢复正常服务。```熔断器实现方式可采用Spring Cloud Hystrix

- 服务降级<br/>
将系统所有功能进行

- 延迟处理

- 特权处理

- 实现方式
  + 熔断技术

  + 计数器方法

  + 队列方法

  + 令牌桶算法
### 注意事项 ###
- 实时监控

- 手动开关

- 限流的性能